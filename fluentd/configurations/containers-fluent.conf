<source>
  @type tail
  format json
  read_from_head true
  tag docker.log
  path /fluentd/log/containers/*/*-json.log
  pos_file /tmp/container-logs.pos
</source>

#<match docker.log>
#   @type file
#   path /output/docker.log
#</match>

<match docker.log>
 # plugin type
  @type mongo

  # mongodb db + collection
  database CatalogDB
  collection docker_logs

  # mongodb host + port
  host catalogdb
  port 27017

  # interval
  <buffer>
    flush_interval 10s
  </buffer>

  # make sure to include the time key
  <inject>
    time_key time
  </inject>

</match>